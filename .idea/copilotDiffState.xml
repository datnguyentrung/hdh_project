<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/com/dat/DatabaseDemo.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/dat/DatabaseDemo.java" />
              <option name="updatedContent" value="package com.dat;&#10;&#10;import com.dat.database.DatabaseManager;&#10;import com.dat.domain.Student;&#10;import com.dat.domain.ClassSession;&#10;import com.dat.domain.StudentAttendance;&#10;import com.dat.enums.Attendance;&#10;import com.dat.enums.Evaluation;&#10;import java.time.LocalDate;&#10;import java.util.List;&#10;&#10;public class DatabaseDemo {&#10;    public static void main(String[] args) {&#10;        DatabaseManager dbManager = DatabaseManager.getInstance();&#10;        &#10;        System.out.println(&quot;=== DEMO: STUDENT ATTENDANCE CRUD OPERATIONS ===\n&quot;);&#10;        &#10;        // 1. Hiển thị dữ liệu ban đầu&#10;        System.out.println(&quot;1. Initial Data:&quot;);&#10;        dbManager.printAllStatistics();&#10;        &#10;        // 2. Demo READ operations&#10;        System.out.println(&quot;\n2. READ Operations Demo:&quot;);&#10;        &#10;        // Lấy attendance của một học sinh cụ thể&#10;        String studentId = &quot;ST001&quot;;&#10;        List&lt;StudentAttendance&gt; studentAttendances = dbManager.getAttendancesByStudent(studentId);&#10;        System.out.println(&quot;\nAttendance records for student &quot; + studentId + &quot;:&quot;);&#10;        for (StudentAttendance sa : studentAttendances) {&#10;            System.out.printf(&quot;Date: %s, Class: %s, Status: %s, Evaluation: %s\n&quot;,&#10;                    sa.getCreatedDate(), sa.getClassSession().getIdClassSession(),&#10;                    sa.getAttendance(), sa.getEvaluation());&#10;        }&#10;        &#10;        // Lấy attendance theo ngày&#10;        LocalDate specificDate = LocalDate.of(2024, 11, 11);&#10;        List&lt;StudentAttendance&gt; dateAttendances = dbManager.getAttendancesByDate(specificDate);&#10;        System.out.println(&quot;\nAttendance records for &quot; + specificDate + &quot;:&quot;);&#10;        for (StudentAttendance sa : dateAttendances) {&#10;            System.out.printf(&quot;Student: %s, Class: %s, Status: %s\n&quot;,&#10;                    sa.getStudent().getNameStudent(), sa.getClassSession().getIdClassSession(),&#10;                    sa.getAttendance());&#10;        }&#10;        &#10;        // 3. Demo CREATE operation&#10;        System.out.println(&quot;\n3. CREATE Operation Demo:&quot;);&#10;        Student student = dbManager.getStudentById(&quot;ST003&quot;);&#10;        ClassSession classSession = dbManager.getClassSessionById(&quot;CS001&quot;);&#10;        LocalDate newDate = LocalDate.of(2024, 11, 25);&#10;        &#10;        StudentAttendance newAttendance = new StudentAttendance(newDate, student, classSession);&#10;        newAttendance.setAttendance(Attendance.PRESENT);&#10;        newAttendance.setEvaluation(Evaluation.GOOD);&#10;        &#10;        dbManager.addStudentAttendance(newAttendance);&#10;        System.out.println(&quot;Added new attendance record:&quot;);&#10;        System.out.printf(&quot;Student: %s, Date: %s, Class: %s, Status: %s, Evaluation: %s\n&quot;,&#10;                newAttendance.getStudent().getNameStudent(), newAttendance.getCreatedDate(),&#10;                newAttendance.getClassSession().getIdClassSession(), newAttendance.getAttendance(),&#10;                newAttendance.getEvaluation());&#10;        &#10;        // 4. Demo UPDATE operation&#10;        System.out.println(&quot;\n4. UPDATE Operation Demo:&quot;);&#10;        StudentAttendance existingAttendance = dbManager.getStudentAttendance(&#10;                LocalDate.of(2024, 11, 4), &quot;ST001&quot;, &quot;CS001&quot;);&#10;        &#10;        if (existingAttendance != null) {&#10;            System.out.println(&quot;Before update:&quot;);&#10;            System.out.printf(&quot;Status: %s, Evaluation: %s\n&quot;, &#10;                    existingAttendance.getAttendance(), existingAttendance.getEvaluation());&#10;            &#10;            // Tạo bản cập nhật&#10;            StudentAttendance updatedAttendance = new StudentAttendance(&#10;                    existingAttendance.getCreatedDate(),&#10;                    existingAttendance.getStudent(),&#10;                    existingAttendance.getClassSession());&#10;            updatedAttendance.setAttendance(Attendance.EXCUSED);&#10;            updatedAttendance.setEvaluation(Evaluation.AVERAGE);&#10;            &#10;            boolean updated = dbManager.updateStudentAttendance(updatedAttendance);&#10;            System.out.println(&quot;Update successful: &quot; + updated);&#10;            &#10;            // Kiểm tra sau khi update&#10;            StudentAttendance afterUpdate = dbManager.getStudentAttendance(&#10;                    LocalDate.of(2024, 11, 4), &quot;ST001&quot;, &quot;CS001&quot;);&#10;            System.out.println(&quot;After update:&quot;);&#10;            System.out.printf(&quot;Status: %s, Evaluation: %s\n&quot;, &#10;                    afterUpdate.getAttendance(), afterUpdate.getEvaluation());&#10;        }&#10;        &#10;        // 5. Demo statistical queries&#10;        System.out.println(&quot;\n5. Statistical Queries Demo:&quot;);&#10;        System.out.printf(&quot;Attendance rate for ST001: %.1f%%\n&quot;, &#10;                dbManager.getAttendanceRateByStudent(&quot;ST001&quot;));&#10;        System.out.printf(&quot;Attendance rate for ST002: %.1f%%\n&quot;, &#10;                dbManager.getAttendanceRateByStudent(&quot;ST002&quot;));&#10;        &#10;        // Attendance trong khoảng thời gian&#10;        LocalDate startDate = LocalDate.of(2024, 11, 10);&#10;        LocalDate endDate = LocalDate.of(2024, 11, 20);&#10;        List&lt;StudentAttendance&gt; rangeAttendances = dbManager.getAttendancesByDateRange(startDate, endDate);&#10;        System.out.printf(&quot;\nAttendance records from %s to %s: %d records\n&quot;,&#10;                startDate, endDate, rangeAttendances.size());&#10;        &#10;        // 6. Demo DELETE operation&#10;        System.out.println(&quot;\n6. DELETE Operation Demo:&quot;);&#10;        int beforeDelete = dbManager.getAllStudentAttendances().size();&#10;        boolean deleted = dbManager.deleteStudentAttendance(newDate, &quot;ST003&quot;, &quot;CS001&quot;);&#10;        int afterDelete = dbManager.getAllStudentAttendances().size();&#10;        &#10;        System.out.printf(&quot;Delete successful: %s\n&quot;, deleted);&#10;        System.out.printf(&quot;Records before delete: %d, after delete: %d\n&quot;, beforeDelete, afterDelete);&#10;        &#10;        // 7. Final statistics&#10;        System.out.println(&quot;\n7. Final Statistics:&quot;);&#10;        dbManager.printAllStatistics();&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>